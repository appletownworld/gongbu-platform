# üí≥ Toss Payments Integration Guide

**Telegram Mini App** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ—Ä–µ–π—Å–∫–æ–π –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã Toss Payments –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∫—É—Ä—Å–æ–≤.

---

## üéØ **–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ**

### ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Toss Payments**
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** - –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **6 —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã** - –∫–∞—Ä—Ç–∞, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å—á–µ—Ç, –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥, –º–æ–±–∏–ª—å–Ω—ã–π, –ø–æ–¥–∞—Ä–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –ø—Ä–æ—Å—Ç—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- **Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –≤ Telegram
- **–ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- **Haptic feedback** - —Ç–∞–∫—Ç–∏–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

---

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**

### **1. –°–µ—Ä–≤–∏—Å Toss Payments** (`src/services/tossPayments.ts`)
```typescript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- createPayment() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- createCoursePayment() - –ø–ª–∞—Ç–µ–∂ –∑–∞ –∫—É—Ä—Å
- getAvailablePaymentMethods() - —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
- openPaymentInTelegram() - –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ Telegram
- handlePaymentSuccess/Failure() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### **2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–ø–ª–∞—Ç—ã** (`src/components/PaymentScreen.tsx`)
```typescript
// –§—É–Ω–∫—Ü–∏–∏:
- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫—É—Ä—Å–µ
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

### **3. –•—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞–º–∏** (`src/hooks/usePayment.ts`)
```typescript
// –§—É–Ω–∫—Ü–∏–∏:
- createPayment() - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- getPaymentHistory() - –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- markPaymentCompleted/Failed() - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
```

---

## üí≥ **–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã**

### **1. üí≥ –ö–∞—Ä—Ç–∞ (Card)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Ïã†Ïö©Ïπ¥Îìú/Ï≤¥ÌÅ¨Ïπ¥Îìú
- **–ò–∫–æ–Ω–∫–∞**: üí≥
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### **2. üè¶ –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å—á–µ—Ç (Virtual Account)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Í∞ÄÏÉÅÍ≥ÑÏ¢å ÏûÖÍ∏à
- **–ò–∫–æ–Ω–∫–∞**: üè¶
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### **3. üí∞ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ (Bank Transfer)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Ïã§ÏãúÍ∞Ñ Í≥ÑÏ¢åÏù¥Ï≤¥
- **–ò–∫–æ–Ω–∫–∞**: üí∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### **4. üì± –ú–æ–±–∏–ª—å–Ω—ã–π (Mobile)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Ìú¥ÎåÄÌè∞ ÏÜåÏï°Í≤∞Ï†ú
- **–ò–∫–æ–Ω–∫–∞**: üì±
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### **5. üéÅ –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Gift Certificate)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: Î¨∏ÌôîÏÉÅÌíàÍ∂å/ÎèÑÏÑúÏÉÅÌíàÍ∂å
- **–ò–∫–æ–Ω–∫–∞**: üéÅ
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### **6. ‚ö° –ü—Ä–æ—Å—Ç—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (Easy Pay)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: ÌÜ†Ïä§ÌéòÏù¥/Ïπ¥Ïπ¥Ïò§ÌéòÏù¥/ÌéòÏù¥ÏΩî
- **–ò–∫–æ–Ω–∫–∞**: ‚ö°
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

---

## üöÄ **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**

### **1. –ü–æ–∫—É–ø–∫–∞ –∫—É—Ä—Å–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤
2. –ù–∞–π–¥–∏—Ç–µ –ø–ª–∞—Ç–Ω—ã–π –∫—É—Ä—Å (—Å —Ü–µ–Ω–æ–π üí∞)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üí≥ Íµ¨Îß§"
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
5. –ù–∞–∂–º–∏—Ç–µ "Í≤∞Ï†úÌïòÍ∏∞"
6. –û–ø–ª–∞—Ç–∞ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ Telegram

### **2. –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã:**
1. **–í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞** - 6 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–ø–ª–∞—Ç—ã
2. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫—É—Ä—Å–∞
3. **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–ª–∞—Ç–µ–∂–∞** - –≤ Telegram WebApp
4. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

---

## ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

### **–¢–µ—Å—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```typescript
const TOSS_CONFIG = {
  testApiKey: 'test_sk_dummy_test_key_for_development',
  baseUrl: 'https://api.tosspayments.com',
  testMerchantId: 'test_merchant_id',
  testSuccessUrl: 'https://gongbu.app/payment/success',
  testFailUrl: 'https://gongbu.app/payment/fail',
};
```

### **Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```typescript
// –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏:
const TOSS_CONFIG = {
  apiKey: 'live_sk_your_real_api_key',
  merchantId: 'your_real_merchant_id',
  successUrl: 'https://yourdomain.com/payment/success',
  failUrl: 'https://yourdomain.com/payment/fail',
};
```

---

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**

### **1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Toss Payments:**
1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [toss.im](https://toss.im)
2. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URLs

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```typescript
// –í src/services/tossPayments.ts
const TOSS_CONFIG = {
  apiKey: 'live_sk_your_real_api_key', // –í–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á
  merchantId: 'your_merchant_id',      // –í–∞—à merchant ID
  successUrl: 'https://gongbu.app/payment/success',
  failUrl: 'https://gongbu.app/payment/fail',
};
```

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook:**
```typescript
// URL –¥–ª—è webhook: https://yourdomain.com/api/payments/toss/webhook
// –°–æ–±—ã—Ç–∏—è: payment.completed, payment.failed, payment.cancelled
```

---

## üì± **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**

### **–û—Ç–∫—Ä—ã—Ç–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π:**
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ Telegram WebApp
await tossPaymentsService.openPaymentInTelegram(paymentUrl);

// Fallback –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
window.open(paymentUrl, '_blank');
```

### **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
```typescript
// Haptic feedback –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');

// Haptic feedback –ø—Ä–∏ –æ—à–∏–±–∫–µ
window.Telegram.WebApp.HapticFeedback.notificationOccurred('error');

// –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
window.Telegram.WebApp.showAlert('Í≤∞Ï†úÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
```

---

## üíæ **–ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π**

### **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage:**
```typescript
interface PaymentHistory {
  id: string;
  courseId: string;
  courseName: string;
  amount: number;
  status: 'pending' | 'completed' | 'failed' | 'cancelled';
  paymentKey?: string;
  orderId?: string;
  createdAt: string;
  completedAt?: string;
}
```

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏:**
- **pending** - –ø–ª–∞—Ç–µ–∂ —Å–æ–∑–¥–∞–Ω, –æ–∂–∏–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—ã
- **completed** - –ø–ª–∞—Ç–µ–∂ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω
- **failed** - –ø–ª–∞—Ç–µ–∂ –Ω–µ —É–¥–∞–ª—Å—è
- **cancelled** - –ø–ª–∞—Ç–µ–∂ –æ—Ç–º–µ–Ω–µ–Ω

---

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```typescript
// –¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞
Ïπ¥ÎìúÎ≤àÌò∏: 4242424242424242
ÎßåÎ£åÏùº: 12/25
CVC: 123

// –¢–µ—Å—Ç–æ–≤—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å—á–µ—Ç
ÏùÄÌñâ: ÌÜ†Ïä§Î±ÖÌÅ¨
Í≥ÑÏ¢åÎ≤àÌò∏: 1000-0000-0000
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ API –≤—ã–∑–æ–≤
2. **–û—Ç–∫—Ä—ã—Ç–∏–µ –≤ Telegram** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ callback —Ñ—É–Ω–∫—Ü–∏–∏
4. **–ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

---

## üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ** API –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ** –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ** –≤—Å–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ webhook** –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

### **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã
if (amount <= 0 || amount > 1000000) {
  throw new Error('Invalid amount');
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ email
if (!customerEmail.includes('@')) {
  throw new Error('Invalid email');
}
```

---

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```typescript
// –£—Å–ø–µ—à–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
console.log('Payment Success:', { paymentKey, orderId, amount });

// –û—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
console.error('Payment Failure:', { errorCode, errorMessage });

// API –≤—ã–∑–æ–≤—ã
console.log('Toss API Call:', { endpoint, method, data });
```

### **–ú–µ—Ç—Ä–∏–∫–∏:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã

---

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**Toss Payments –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ Telegram Mini App!**

### **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞ –∫—É—Ä—Å—ã
- ‚úÖ 6 —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ Telegram WebApp
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ Haptic feedback
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. **–ü–æ–ª—É—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏** –æ—Ç Toss Payments
2. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ –∫–æ–¥–µ
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook** –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏
5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

---

**Gongbu + Toss Payments = üí≥üöÄ**



#!/usr/bin/env node

/**
 * ๐ ะกัะฐััะตั ะดะปั BrowserTools MCP Server
 * 
 * ะะฐะฟััะบะฐะตั ะฑัะฐัะทะตัะฝัะน ัะตัะฒะตั ะดะปั ะฟัะพัะผะพััะฐ ัััะฐะฝะธั ัะตัะตะท MCP
 * ะะปััะตัะฝะฐัะธะฒะฐ ะฝะตัะฐะฑะพัะฐััะตะผั Puppeteer ะฒ WSL ะพะบััะถะตะฝะธะธ
 */

const { spawn } = require('child_process');
const path = require('path');

console.log('๐ ========== ะะะะฃะกะ BROWSERTOOLS MCP ==========\n');

// ะะฝัะพัะผะฐัะธั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั
console.log('๐ฆ BrowserTools MCP - ัะพะฒัะตะผะตะฝะฝะพะต ัะตัะตะฝะธะต ะดะปั ะฑัะฐัะทะตัะฝะพะน ะฐะฒัะพะผะฐัะธะทะฐัะธะธ:');
console.log('   โข ะะฐะฑะพัะฐะตั ัะตัะตะท ัะฐััะธัะตะฝะธะต Chrome (ะฝะต ััะตะฑัะตั ะฑะธะฑะปะธะพัะตะบ)');
console.log('   โข ะะฐัะฒะฐั ัะบัะธะฝัะพัะพะฒ ะธ ะฐะฝะฐะปะธะท DOM ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ');
console.log('   โข ะัะพะฒะตัะบะธ ะดะพัััะฟะฝะพััะธ, SEO, ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ');
console.log('   โข ะะฝัะตะณัะฐัะธั ั Lighthouse ะดะปั ะณะปัะฑะพะบะพะณะพ ะฐะฝะฐะปะธะทะฐ');
console.log('   โข ะะพะปะฝะฐั ะฟัะธะฒะฐัะฝะพััั - ะฒัะต ะดะฐะฝะฝัะต ะปะพะบะฐะปัะฝะพ');
console.log('');

console.log('โ๏ธ ะขะะะะะะะะะฏ ะะะฏ ะะะะะขะซ:');
console.log('   1. ๐ ะฃััะฐะฝะพะฒะธัั ัะฐััะธัะตะฝะธะต Chrome: BrowserTools MCP');
console.log('   2. ๐ง ะะฐะฟัััะธัั ััะพั ัะตัะฒะตั (ะฒัะฟะพะปะฝัะตััั ัะตะนัะฐั)');
console.log('   3. ๐ฅ๏ธ ะัะบัััั Chrome DevTools ะฝะฐ ะฝัะถะฝะพะน ัััะฐะฝะธัะต');
console.log('   4. ๐ ะะบัะธะฒะธัะพะฒะฐัั ะฟะฐะฝะตะปั BrowserTools MCP ะฒ DevTools');
console.log('');

console.log('๐ ะกะกะซะะะ:');
console.log('   โข ะะฐััะธัะตะฝะธะต: https://chrome.google.com/webstore/search/browsertools%20mcp');
console.log('   โข ะะพะบัะผะตะฝัะฐัะธั: https://mcpbro.com/ru/mcp/browsertools-mcp');
console.log('');

// ะะฐะฟััะบะฐะตะผ ะฑัะฐัะทะตัะฝัะน ัะตัะฒะตั
console.log('๐ฏ ะะะะฃะกะ ะะะะฃะะะะะะะ ะกะะะะะะ...\n');

const server = spawn('npx', ['@agentdeskai/browser-tools-server'], {
  stdio: 'inherit',
  cwd: process.cwd()
});

server.on('error', (error) => {
  console.error('โ ะัะธะฑะบะฐ ะทะฐะฟััะบะฐ ะฑัะฐัะทะตัะฝะพะณะพ ัะตัะฒะตัะฐ:', error.message);
  process.exit(1);
});

server.on('close', (code) => {
  if (code === 0) {
    console.log('\nโ ะัะฐัะทะตัะฝัะน ัะตัะฒะตั ะทะฐะฒะตััะตะฝ ััะฟะตัะฝะพ');
  } else {
    console.log(`\nโ ะัะฐัะทะตัะฝัะน ัะตัะฒะตั ะทะฐะฒะตััะตะฝ ั ะบะพะดะพะผ: ${code}`);
  }
});

// ะะฑัะฐะฑะพัะบะฐ ัะธะณะฝะฐะปะพะฒ ะทะฐะฒะตััะตะฝะธั
process.on('SIGINT', () => {
  console.log('\n๐ ะะพะปััะตะฝ ัะธะณะฝะฐะป ะทะฐะฒะตััะตะฝะธั...');
  server.kill('SIGINT');
});

process.on('SIGTERM', () => {
  console.log('\n๐ ะะพะปััะตะฝ ัะธะณะฝะฐะป ะทะฐะฒะตััะตะฝะธั...');
  server.kill('SIGTERM');
});

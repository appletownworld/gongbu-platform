# Gongbu Platform - Development Rules

## TypeScript Code Style

### ‚úÖ –ú–û–ñ–ù–û
- –ò—Å–ø–æ–ª—å–∑—É–π strict mode TypeScript
- –Ø–≤–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö public API
- interface –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤, type –¥–ª—è unions
- camelCase –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- PascalCase –¥–ª—è –∫–ª–∞—Å—Å—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- kebab-case –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫
- JSDoc –¥–ª—è –≤—Å–µ—Ö public –º–µ—Ç–æ–¥–æ–≤

### ‚ùå –ù–ï–õ–¨–ó–Ø
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å any —Ç–∏–ø (–∏—Å–ø–æ–ª—å–∑—É–π unknown)
- var (—Ç–æ–ª—å–∫–æ const/let)
- console.log –≤ production –∫–æ–¥–µ
- –§–∞–π–ª—ã –±–æ–ª—å—à–µ 300 —Å—Ç—Ä–æ–∫
- –§—É–Ω–∫—Ü–∏–∏ –±–æ–ª—å—à–µ 50 —Å—Ç—Ä–æ–∫
- –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –±–æ–ª—å—à–µ 10

## NestJS Patterns

### ‚úÖ –ú–û–ñ–ù–û
- Dependency Injection –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- DTO —Å class-validator –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- Repository pattern –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- Guards –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- Interceptors –¥–ª—è cross-cutting concerns
- Exception filters –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### ‚ùå –ù–ï–õ–¨–ó–Ø
- –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è

## Testing

### ‚úÖ –ú–û–ñ–ù–û
- 80%+ code coverage
- Unit tests –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- Integration tests –¥–ª—è API endpoints
- E2E tests –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö user flows
- Mocking –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- Test factories –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è test data

### ‚ùå –ù–ï–õ–¨–ó–Ø
- –¢–µ—Å—Ç—ã –±–µ–∑ assertions
- –¢–µ—Å—Ç—ã –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Shared state –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏
- –¢–µ—Å—Ç—ã –±–µ–∑ cleanup
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ failing tests

## Database

### ‚úÖ –ú–û–ñ–ù–û
- UUID –¥–ª—è primary keys
- created_at, updated_at –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- Soft delete —á–µ—Ä–µ–∑ deleted_at
- JSONB –¥–ª—è –≥–∏–±–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- Indexes –¥–ª—è foreign keys –∏ queries
- Transactions –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### ‚ùå –ù–ï–õ–¨–ó–Ø
- Auto-increment IDs
- NULL –≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è—Ö
- Queries –±–µ–∑ WHERE –¥–ª—è updates/deletes
- N+1 query problems
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –±–µ–∑ pagination
- Raw SQL –±–µ–∑ parameterization

## Development Process

### ‚úÖ –ú–û–ñ–ù–û
- –í–µ–¥–µ–Ω–∏–µ devlog.md —Ñ–∞–π–ª–∞ –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¢–û–õ–¨–ö–û —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ devlog (date +%Y-%m-%d\ %H:%M)
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- –ó–∞–ø–∏—Å—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Commit'—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º devlog

### ‚ùå –ù–ï–õ–¨–ó–Ø
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ devlog
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ devlog (—Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è)
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤–∞–∂–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –†–∞–±–æ—Ç–∞ –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

## GitHub Secrets Configuration

### ‚úÖ –û–§–ò–¶–ò–ê–õ–¨–ù–´–ï –ò–ú–ï–ù–ê –°–ï–ö–†–ï–¢–û–í –í –≠–¢–û–ú –ü–†–û–ï–ö–¢–ï
**–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –∏–º–µ–Ω–∞! –ù–ï —Å–æ–∑–¥–∞–≤–∞–π –Ω–æ–≤—ã–µ –∏–º–µ–Ω–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤!

#### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- `JWT_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ –æ—Ç @BotFather
- `TELEGRAM_WEBAPP_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è Telegram WebApp
- `ADMIN_USER_IDS` - —Å–ø–∏—Å–æ–∫ Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

#### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è DB_PASSWORD)
- `REDIS_PASSWORD` - –ø–∞—Ä–æ–ª—å Redis

#### üåê URL –∏ —Å–µ—Ç—å:
- `APP_URL` - –æ—Å–Ω–æ–≤–Ω–æ–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
- `API_BASE_URL` - –±–∞–∑–æ–≤—ã–π URL –¥–ª—è API
- `WEBHOOK_URL` - URL –¥–ª—è Telegram webhook
- `WEBSOCKET_URL` - URL –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- `DOMAIN_NAME` - –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞
- `CORS_ORIGIN` - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ CORS origins

#### üñ•Ô∏è VPS –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- `VPS_HOST` - IP –∞–¥—Ä–µ—Å VPS —Å–µ—Ä–≤–µ—Ä–∞
- `VPS_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `VPS_SSH_KEY` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ VPS
- `GRAFANA_ADMIN_PASSWORD` - –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞ Grafana

### ‚ùå –ù–ï –°–û–ó–î–ê–í–ê–ô –ù–û–í–´–ï –ò–ú–ï–ù–ê:
- `DATABASE_URL` (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ POSTGRES_PASSWORD)
- `DB_USER` (—Å—Ç–∞—Ç–∏—á–Ω–æ: gongbu_user)
- `DB_PASSWORD` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è POSTGRES_PASSWORD)
- –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –∏–º–µ–Ω–∞ –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

### üìù –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ .env –≤ deploy.yml –∏—Å–ø–æ–ª—å–∑—É–π:
```yaml
DATABASE_URL=postgresql://gongbu_user:${{ secrets.POSTGRES_PASSWORD }}@localhost:5432/gongbu_platform
DB_USER=gongbu_user
DB_PASSWORD=${{ secrets.POSTGRES_PASSWORD }}
JWT_SECRET=${{ secrets.JWT_SECRET }}
TELEGRAM_BOT_TOKEN=${{ secrets.TELEGRAM_BOT_TOKEN }}
REDIS_PASSWORD=${{ secrets.REDIS_PASSWORD }}
WEBSOCKET_URL=${{ secrets.WEBSOCKET_URL }}
# –∏ —Ç.–¥. –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ—á–Ω—ã–µ –∏–º–µ–Ω–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
```